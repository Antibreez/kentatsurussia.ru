const emailValidation=/^([\w-\.]+@([\w-]+\.)+[\w-]{2,4})?$/,$warrantyCodeForm=$(".code-registration__form"),$warrantyCode=$warrantyCodeForm.find("#warranty-code"),$purchaseDate=$warrantyCodeForm.find("#purchase-date"),$warrantyEmail=$warrantyCodeForm.find("#email"),$warrantyCity=$warrantyCodeForm.find("#city"),$warrantyCodeNote=$warrantyCodeForm.find(".code-registration__note"),$warrantyCodeSubmit=$warrantyCodeForm.find('button[type="submit"]'),warrantyCodeStage=$warrantyCode.length?1:$warrantyEmail.length?2:3;let hasPurchaseDateError=!1,hasWarrantyCodeError=!1,hasWarrantyEmailError=!1,hasWarrantyCityError=!1;const warrantyCodeMask=$warrantyCode.attr("placeholder")?$warrantyCode.attr("placeholder").replace(/_/g,9):"99999-99999-99999";$warrantyCode.inputmask({mask:warrantyCodeMask,showMaskOnHover:!1});const isPurchaseDateValid=()=>(console.log("###date",Date.parse($purchaseDate.val())),2===$purchaseDate.val().split("").filter((a=>"."===a)).length&&!!Date.parse($purchaseDate.val())),isWarrantyCodeValid=()=>$warrantyCode.attr("pattern")?$warrantyCode.val().trim()&&new RegExp($warrantyCode.attr("pattern")).test($warrantyCode.val()):$warrantyCode.val().trim()&&!$warrantyCode.val().includes("_"),isWarrantyEmailValid=()=>!(!$warrantyEmail.val().trim()||!new RegExp(emailValidation).test($warrantyEmail.val())),isWarrantyCityValid=()=>!!$warrantyCity.val().trim();function onPurchaseDateSelect(){hasPurchaseDateError=!1,$purchaseDate.parent().removeClass("is--invalid"),hasWarrantyCodeError||hasPurchaseDateError||$warrantyCodeSubmit.removeAttr("disabled")}datepickerMonths=["Январь","Февраль","Март","Апрель","Май","Июнь","Июль","Август","Сентябрь","Октябрь","Ноябрь","Декабрь"],$.datepicker.regional.ru={closeText:"Закрыть",prevText:"Предыдущий",nextText:"Следующий",currentText:"Сегодня",monthNames:datepickerMonths,monthNamesShort:datepickerMonths,dayNames:["воскресенье","понедельник","вторник","среда","четверг","пятница","суббота"],dayNamesShort:["вск","пнд","втр","срд","чтв","птн","сбт"],dayNamesMin:["Вс","Пн","Вт","Ср","Чт","Пт","Сб"],weekHeader:"Не",dateFormat:"dd.mm.yy",firstDay:1,isRTL:!1,showMonthAfterYear:!1,yearSuffix:"",changeMonth:!0,changeYear:!0,yearRange:`1990:${(new Date).getFullYear()}`,minDate:new Date(1990,0,1),maxDate:new Date,showOtherMonths:!0,onSelect:onPurchaseDateSelect,onChangeMonthYear:function(){console.log("###el",$("#ui-datepicker-div").find("select")),setTimeout((()=>{$("#ui-datepicker-div").find("select").each(((a,r)=>{$(r).select2({minimumResultsForSearch:1/0,dropdownCssClass:"datepicker-dropdown"})}))}),100)}},$.datepicker.setDefaults($.datepicker.regional.ru),$("#purchase-date").datepicker(),$("#purchase-date").on("click",(function(){$("#ui-datepicker-div").find("select").each(((a,r)=>{$(r).select2({minimumResultsForSearch:1/0,dropdownCssClass:"datepicker-dropdown"})}))})),$warrantyCode.on("input",(function(a){hasWarrantyCodeError=!1,$warrantyCode.parent().removeClass("is--invalid"),hasWarrantyCodeError||hasPurchaseDateError||$warrantyCodeSubmit.removeAttr("disabled")})),$purchaseDate.on("input",(function(a){hasPurchaseDateError=!1,$purchaseDate.parent().removeClass("is--invalid"),hasWarrantyCodeError||hasPurchaseDateError||$warrantyCodeSubmit.removeAttr("disabled")})),$warrantyEmail.on("input",(function(){hasWarrantyEmailError=!1,$warrantyEmail.parent().removeClass("is--invalid"),hasWarrantyEmailError||hasWarrantyCityError||$warrantyCodeSubmit.removeAttr("disabled")})),$warrantyCity.on("input",(function(){hasWarrantyCityError=!1,$warrantyCity.parent().removeClass("is--invalid"),hasWarrantyEmailError||hasWarrantyCityError||$warrantyCodeSubmit.removeAttr("disabled")})),$warrantyCodeSubmit.on("click",(function(a){if(a.preventDefault(),1===warrantyCodeStage){let a=!0;isWarrantyCodeValid()||(hasWarrantyCodeError=!0,$warrantyCode.parent().addClass("is--invalid"),a=!1),isPurchaseDateValid()||(hasPurchaseDateError=!0,$purchaseDate.parent().addClass("is--invalid"),a=!1),console.log("valid",a),a?$warrantyCodeForm.find("form").submit():$warrantyCodeSubmit.attr("disabled",!0)}if(2===warrantyCodeStage){let a=!0;isWarrantyEmailValid()||(hasWarrantyEmailError=!0,$warrantyEmail.parent().addClass("is--invalid"),a=!1),isWarrantyCityValid()||(hasWarrantyCityError=!0,$warrantyCity.parent().addClass("is--invalid"),a=!1),a?$warrantyCodeForm.find("form").submit():$warrantyCodeSubmit.attr("disabled",!0)}})),$warrantyCodeNote.on("click",(function(){if($(this).hasClass("is--opened"))$(this).removeClass("is--opened"),$(".code-registration__code-popup--outer").remove();else{$(this).addClass("is--opened");const a=$warrantyCodeNote.find(".code-registration__code-popup").clone();a.addClass("code-registration__code-popup--outer"),$("body").append(a),a.addClass("is--visible")}}));const onWarrantyCodePopupClose=()=>{$warrantyCodeNote.removeClass("is--opened"),$(".code-registration__code-popup--outer").remove()};$(document).on("click",".code-registration__code-popup--outer .code-registration__code-popup-bg",onWarrantyCodePopupClose),$(document).on("click",".code-registration__code-popup--outer .code-registration__code-popup-close",onWarrantyCodePopupClose);
//# sourceMappingURL=main.min.js.map
